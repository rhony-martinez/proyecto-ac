<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sistema de Confort Térmico Inteligente v3.1: Funciones Auxiliares del Sistema</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sistema de Confort Térmico Inteligente v3.1<span id="projectnumber">&#160;3.1 - 2025</span>
   </div>
   <div id="projectbrief">Sistema FSM avanzado con PMV, RFID y actuadores completos</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Buscar',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__auxiliares__grupo.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Funciones Auxiliares del Sistema </div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Diagrama de colaboración de Funciones Auxiliares del Sistema:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo.png" border="0" usemap="#agroup____auxiliares____grupo" loading="lazy" alt=""/></div>
<map name="agroup____auxiliares____grupo" id="agroup____auxiliares____grupo">
<area shape="rect" href="group__actuadores__grupo.html" title=" " alt="" coords="220,5,353,48"/>
<area shape="rect" title=" " alt="" coords="5,101,148,144"/>
<area shape="rect" href="group__pmv__grupo.html" title=" " alt="" coords="218,72,355,115"/>
<area shape="rect" href="group__rfid__funciones__grupo.html" title=" " alt="" coords="196,139,377,165"/>
<area shape="rect" href="group__verificacion__grupo.html" title=" " alt="" coords="201,189,372,232"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-groups" class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:rfid_5Ffunciones_5Fgrupo" id="r_rfid_5Ffunciones_5Fgrupo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfid__funciones__grupo.html">Funciones de Gestión RFID</a></td></tr>
<tr class="memitem:pmv_5Fgrupo" id="r_pmv_5Fgrupo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pmv__grupo.html">Cálculo PMV según Modelo de Fanger</a></td></tr>
<tr class="memitem:actuadores_5Fgrupo" id="r_actuadores_5Fgrupo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__actuadores__grupo.html">Sistema de Control de Actuadores</a></td></tr>
<tr class="memitem:verificacion_5Fgrupo" id="r_verificacion_5Fgrupo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__verificacion__grupo.html">Funciones de Verificación en Loop</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Funciones</h2></td></tr>
<tr class="memitem:ga60fb856dfde931eb206fe822fd5aba1c" id="r_ga60fb856dfde931eb206fe822fd5aba1c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga60fb856dfde931eb206fe822fd5aba1c">readInputSerial</a> ()</td></tr>
<tr class="memdesc:ga60fb856dfde931eb206fe822fd5aba1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee entrada del usuario desde el puerto serial.  <br /></td></tr>
<tr class="memitem:ga451fb754ff1057f95e36210846ea0aca" id="r_ga451fb754ff1057f95e36210846ea0aca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga451fb754ff1057f95e36210846ea0aca">readPassword</a> ()</td></tr>
<tr class="memdesc:ga451fb754ff1057f95e36210846ea0aca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee la contraseña del keypad con feedback visual en LCD.  <br /></td></tr>
<tr class="memitem:gaf8626fd53a9fd252db6f253207b78b87" id="r_gaf8626fd53a9fd252db6f253207b78b87"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf8626fd53a9fd252db6f253207b78b87">checkPassword</a> ()</td></tr>
<tr class="memdesc:gaf8626fd53a9fd252db6f253207b78b87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valida la contraseña ingresada contra la clave predefinida.  <br /></td></tr>
<tr class="memitem:gaad5c2beac548774ab4b7b6f10afd2c64" id="r_gaad5c2beac548774ab4b7b6f10afd2c64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaad5c2beac548774ab4b7b6f10afd2c64">checkBloqueo</a> ()</td></tr>
<tr class="memdesc:gaad5c2beac548774ab4b7b6f10afd2c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifica entrada de desbloqueo en estado BLOQUEO.  <br /></td></tr>
<tr class="memitem:ga6488153c8ee9b1f1a7ef5db4ff81ca88" id="r_ga6488153c8ee9b1f1a7ef5db4ff81ca88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6488153c8ee9b1f1a7ef5db4ff81ca88">leerSensores</a> ()</td></tr>
<tr class="memdesc:ga6488153c8ee9b1f1a7ef5db4ff81ca88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee y procesa datos de todos los sensores del sistema.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Descripción detallada</h2>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Documentación de funciones</h2>
<a id="gaad5c2beac548774ab4b7b6f10afd2c64" name="gaad5c2beac548774ab4b7b6f10afd2c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad5c2beac548774ab4b7b6f10afd2c64">&#9670;&#160;</a></span>checkBloqueo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkBloqueo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifica entrada de desbloqueo en estado BLOQUEO. </p>
<p>Monitorea continuamente el keypad cuando el sistema está en estado BLOQUEO, buscando específicamente la tecla '*' para desbloquear el sistema y retornar a INICIO.</p>
<p>@security Función crítica para recuperación del sistema</p>
<dl class="section see"><dt>Ver también</dt><dd><a class="el" href="group__estados__grupo.html#gae7f7255177511950ea5ff9086d20a9ef" title="Maneja la entrada al estado BLOQUEO - seguridad por fallos.">outputBloqueo()</a> </dd>
<dd>
<a class="el" href="sistema__confort__termico_8ino.html#aa592846580d9f3bebe4adc098ded791d" title="Maneja la salida del estado BLOQUEO - limpieza de recursos.">onLeavingBloqueo()</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="sistema__confort__termico_8ino_source.html#l01457">1457</a> del archivo <a class="el" href="sistema__confort__termico_8ino_source.html">sistema_confort_termico.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1457</span>                    {</div>
<div class="line"><span class="lineno"> 1458</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__fsm__grupo.html#ga29b5cbc7a62b025f70547fcb3efd8e2d">stateMachine</a>.GetState() == <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga5d74787dedbc4e11c1ab15bf487e61f8a7b7eab4ff8ecba6e3566d75815f318fc">BLOQUEO</a>) {</div>
<div class="line"><span class="lineno"> 1459</span>    <span class="keywordtype">char</span> key = <a class="code hl_variable" href="sistema__confort__termico_8ino.html#a0e6c3cc7e8c762ab0ca1fa2296d7bbfe">keypad</a>.getKey();</div>
<div class="line"><span class="lineno"> 1460</span>    <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;*&#39;</span>) {</div>
<div class="line"><span class="lineno"> 1461</span>      <a class="code hl_variable" href="group__fsm__grupo.html#gad4db59ccea8946af2bb70f8269e99eeb">input</a> = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090af6ac79524f6fe1d95e4acebe357ea706">TECLA_ASTERISCO</a>;</div>
<div class="line"><span class="lineno"> 1462</span>    }</div>
<div class="line"><span class="lineno"> 1463</span>  }</div>
<div class="line"><span class="lineno"> 1464</span>}</div>
<div class="ttc" id="agroup__fsm__grupo_html_ga29b5cbc7a62b025f70547fcb3efd8e2d"><div class="ttname"><a href="group__fsm__grupo.html#ga29b5cbc7a62b025f70547fcb3efd8e2d">stateMachine</a></div><div class="ttdeci">StateMachine stateMachine(7, 11)</div><div class="ttdoc">Instancia de máquina de estados con 7 estados y 11 transiciones.</div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gad4db59ccea8946af2bb70f8269e99eeb"><div class="ttname"><a href="group__fsm__grupo.html#gad4db59ccea8946af2bb70f8269e99eeb">input</a></div><div class="ttdeci">Input input</div><div class="ttdoc">Almacena la última entrada del usuario para procesamiento FSM.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00336">sistema_confort_termico.ino:336</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090af6ac79524f6fe1d95e4acebe357ea706"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090af6ac79524f6fe1d95e4acebe357ea706">TECLA_ASTERISCO</a></div><div class="ttdeci">@ TECLA_ASTERISCO</div><div class="ttdoc">Usuario presiona tecla &#39;*&#39; para desbloquear sistema.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00325">sistema_confort_termico.ino:325</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga5d74787dedbc4e11c1ab15bf487e61f8a7b7eab4ff8ecba6e3566d75815f318fc"><div class="ttname"><a href="group__fsm__grupo.html#gga5d74787dedbc4e11c1ab15bf487e61f8a7b7eab4ff8ecba6e3566d75815f318fc">BLOQUEO</a></div><div class="ttdeci">@ BLOQUEO</div><div class="ttdoc">Estado de bloqueo - Seguridad por autenticación fallida.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00313">sistema_confort_termico.ino:313</a></div></div>
<div class="ttc" id="asistema__confort__termico_8ino_html_a0e6c3cc7e8c762ab0ca1fa2296d7bbfe"><div class="ttname"><a href="sistema__confort__termico_8ino.html#a0e6c3cc7e8c762ab0ca1fa2296d7bbfe">keypad</a></div><div class="ttdeci">Keypad keypad</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00271">sistema_confort_termico.ino:271</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="sistema__confort__termico_8ino_source.html#l00313">BLOQUEO</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00336">input</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00271">keypad</a>, <a class="el" href="group__fsm__grupo.html#ga29b5cbc7a62b025f70547fcb3efd8e2d">stateMachine()</a> y <a class="el" href="sistema__confort__termico_8ino_source.html#l00325">TECLA_ASTERISCO</a>.</p>

<p class="reference">Referenciado por <a class="el" href="sistema__confort__termico_8ino_source.html#l00590">loop()</a>.</p>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas de esta función:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_cgraph.png" border="0" usemap="#agroup__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_cgraph" id="agroup__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_cgraph">
<area shape="rect" title="Verifica entrada de desbloqueo en estado BLOQUEO." alt="" coords="5,5,109,32"/>
<area shape="rect" href="group__fsm__grupo.html#ga29b5cbc7a62b025f70547fcb3efd8e2d" title="Instancia de máquina de estados con 7 estados y 11 transiciones." alt="" coords="157,5,256,32"/>
<area shape="poly" title=" " alt="" coords="109,16,141,16,141,21,109,21"/>
</map>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas a esta función:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_icgraph.png" border="0" usemap="#agroup__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_icgraph" id="agroup__auxiliares__grupo_gaad5c2beac548774ab4b7b6f10afd2c64_icgraph">
<area shape="rect" title="Verifica entrada de desbloqueo en estado BLOQUEO." alt="" coords="99,5,202,32"/>
<area shape="rect" href="sistema__confort__termico_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Bucle principal del sistema &#45; Ejecución continua." alt="" coords="5,5,51,32"/>
<area shape="poly" title=" " alt="" coords="83,21,51,21,51,16,83,16"/>
</map>
</div>

</div>
</div>
<a id="gaf8626fd53a9fd252db6f253207b78b87" name="gaf8626fd53a9fd252db6f253207b78b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf8626fd53a9fd252db6f253207b78b87">&#9670;&#160;</a></span>checkPassword()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool checkPassword </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Valida la contraseña ingresada contra la clave predefinida. </p>
<dl class="section return"><dt>Devuelve</dt><dd>true si la clave es correcta (autenticación exitosa) </dd>
<dd>
false si la clave es incorrecta (autenticación fallida)</dd></dl>
<p>Compara carácter por carácter el buffer clave_user con la clave predefinida almacenada en memoria. Muestra mensaje apropiado en LCD según resultado de la validación.</p>
<p>@security Función sensible a timing attacks - considerar mejora</p>
<dl class="section see"><dt>Ver también</dt><dd><a class="el" href="#ga451fb754ff1057f95e36210846ea0aca" title="Lee la contraseña del keypad con feedback visual en LCD.">readPassword()</a> </dd>
<dd>
<a class="el" href="sistema__confort__termico_8ino.html#a96680a0788cd42f837c8962b9cf89a83" title="Clave de acceso predefinida para autenticación.">clave</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="sistema__confort__termico_8ino_source.html#l01429">1429</a> del archivo <a class="el" href="sistema__confort__termico_8ino_source.html">sistema_confort_termico.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1429</span>                     {</div>
<div class="line"><span class="lineno"> 1430</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; i++) {</div>
<div class="line"><span class="lineno"> 1431</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="sistema__confort__termico_8ino.html#a87806aa7f4565584aaf628f4dc5b18fd">clave_user</a>[i] != <a class="code hl_variable" href="sistema__confort__termico_8ino.html#a96680a0788cd42f837c8962b9cf89a83">clave</a>[i]) {</div>
<div class="line"><span class="lineno"> 1432</span>      <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.clear();</div>
<div class="line"><span class="lineno"> 1433</span>      <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.setCursor(0, 0);</div>
<div class="line"><span class="lineno"> 1434</span>      <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.print(<span class="stringliteral">&quot;Clave Incorrecta&quot;</span>);</div>
<div class="line"><span class="lineno"> 1435</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1436</span>    }</div>
<div class="line"><span class="lineno"> 1437</span>  }</div>
<div class="line"><span class="lineno"> 1438</span>  <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.clear();</div>
<div class="line"><span class="lineno"> 1439</span>  <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.setCursor(0, 0);</div>
<div class="line"><span class="lineno"> 1440</span>  <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.print(<span class="stringliteral">&quot;Clave Correcta!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1441</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1442</span>}</div>
<div class="ttc" id="agroup__hardware__grupo_html_gaf97afdf00af0e116e9b5957f6a470fc2"><div class="ttname"><a href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a></div><div class="ttdeci">LiquidCrystal lcd(12, 11, 5, 4, 3, 2)</div><div class="ttdoc">Objeto LCD para display 16x2 con configuración de pines.</div></div>
<div class="ttc" id="asistema__confort__termico_8ino_html_a87806aa7f4565584aaf628f4dc5b18fd"><div class="ttname"><a href="sistema__confort__termico_8ino.html#a87806aa7f4565584aaf628f4dc5b18fd">clave_user</a></div><div class="ttdeci">char clave_user[6]</div><div class="ttdoc">Buffer para almacenar clave ingresada por usuario.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00251">sistema_confort_termico.ino:251</a></div></div>
<div class="ttc" id="asistema__confort__termico_8ino_html_a96680a0788cd42f837c8962b9cf89a83"><div class="ttname"><a href="sistema__confort__termico_8ino.html#a96680a0788cd42f837c8962b9cf89a83">clave</a></div><div class="ttdeci">const char clave[6]</div><div class="ttdoc">Clave de acceso predefinida para autenticación.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00250">sistema_confort_termico.ino:250</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="sistema__confort__termico_8ino_source.html#l00250">clave</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00251">clave_user</a> y <a class="el" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="sistema__confort__termico_8ino_source.html#l00646">outputInicio()</a>.</p>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas de esta función:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_cgraph.png" border="0" usemap="#agroup__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_cgraph" id="agroup__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_cgraph">
<area shape="rect" title="Valida la contraseña ingresada contra la clave predefinida." alt="" coords="5,5,119,32"/>
<area shape="rect" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2" title="Objeto LCD para display 16x2 con configuración de pines." alt="" coords="167,5,205,32"/>
<area shape="poly" title=" " alt="" coords="119,16,151,16,151,21,119,21"/>
</map>
</div>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas a esta función:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_icgraph.png" border="0" usemap="#agroup__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_icgraph" id="agroup__auxiliares__grupo_gaf8626fd53a9fd252db6f253207b78b87_icgraph">
<area shape="rect" title="Valida la contraseña ingresada contra la clave predefinida." alt="" coords="322,5,435,32"/>
<area shape="rect" href="group__estados__grupo.html#ga390833d0072e6440c9707a25c053dfb3" title="Maneja la entrada al estado INICIO &#45; autenticación de usuario." alt="" coords="187,5,274,32"/>
<area shape="poly" title=" " alt="" coords="306,21,275,21,275,16,306,16"/>
<area shape="rect" href="sistema__confort__termico_8ino.html#a0f66d65ae208fa0a707755d77441dd5f" title="Configura todas las transiciones y callbacks de la FSM." alt="" coords="5,5,139,32"/>
<area shape="poly" title=" " alt="" coords="171,21,139,21,139,16,171,16"/>
</map>
</div>

</div>
</div>
<a id="ga6488153c8ee9b1f1a7ef5db4ff81ca88" name="ga6488153c8ee9b1f1a7ef5db4ff81ca88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6488153c8ee9b1f1a7ef5db4ff81ca88">&#9670;&#160;</a></span>leerSensores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void leerSensores </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee y procesa datos de todos los sensores del sistema. </p>
<p>Realiza lecturas de:</p><ul>
<li>Temperatura ambiente (DHT11) [°C] - Precisión ±1°C</li>
<li>Humedad relativa (DHT11) [%] - Precisión ±2%</li>
<li>Luminosidad ambiente (LDR) [%] - Rango 0-100%</li>
<li>Temperatura radiante (NTC) [°C] - Usando ecuación Steinhart-Hart</li>
</ul>
<dl class="section post"><dt>Postcondición</dt><dd>Actualiza variables globales tempA, humedad, luz, tempR @validation Verifica lecturas válidas del sensor DHT11</dd></dl>
<dl class="section see"><dt>Ver también</dt><dd><a class="el" href="group__variables__grupo.html#gac3170cbfa9a8c8b0c3d2ee9d0765c293" title="Temperatura del aire ambiente [°C] - Sensor DHT11.">tempA</a> </dd>
<dd>
<a class="el" href="group__variables__grupo.html#ga34280c09711b9f4f72211e5c467b57bf" title="Humedad relativa del ambiente [%] - Sensor DHT11.">humedad</a> </dd>
<dd>
<a class="el" href="group__variables__grupo.html#gaa22435b55a8b84bf16cf00696cefbad1" title="Nivel de luminosidad ambiental [%] - Sensor LDR.">luz</a> </dd>
<dd>
<a class="el" href="group__variables__grupo.html#gab35f43c7567f70886ccbc1870761fd13" title="Temperatura radiante media [°C] - Sensor NTC.">tempR</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="sistema__confort__termico_8ino_source.html#l01488">1488</a> del archivo <a class="el" href="sistema__confort__termico_8ino_source.html">sistema_confort_termico.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1488</span>                    {</div>
<div class="line"><span class="lineno"> 1489</span>  <span class="comment">// Lectura de sensor DHT11 (temperatura y humedad)</span></div>
<div class="line"><span class="lineno"> 1490</span>  <a class="code hl_variable" href="group__variables__grupo.html#gac3170cbfa9a8c8b0c3d2ee9d0765c293">tempA</a> = <a class="code hl_function" href="group__hardware__grupo.html#gad7a1df263f6f823242a112ec11297434">dht</a>.readTemperature();  <span class="comment">// °C</span></div>
<div class="line"><span class="lineno"> 1491</span>  <a class="code hl_variable" href="group__variables__grupo.html#ga34280c09711b9f4f72211e5c467b57bf">humedad</a> = <a class="code hl_function" href="group__hardware__grupo.html#gad7a1df263f6f823242a112ec11297434">dht</a>.readHumidity();   <span class="comment">// %</span></div>
<div class="line"><span class="lineno"> 1492</span>  </div>
<div class="line"><span class="lineno"> 1493</span>  <span class="comment">// Lectura de sensor LDR (luminosidad) con mapeo a porcentaje</span></div>
<div class="line"><span class="lineno"> 1494</span>  <span class="keywordtype">int</span> rawLuz = analogRead(<a class="code hl_define" href="group__pines__grupo.html#ga51fd859df7f54aaa2ef64c36c97b548a">LDR_PIN</a>);</div>
<div class="line"><span class="lineno"> 1495</span>  <a class="code hl_variable" href="group__variables__grupo.html#gaa22435b55a8b84bf16cf00696cefbad1">luz</a> = map(rawLuz, 0, 1032, 0, 100);  <span class="comment">// % aproximado de iluminación</span></div>
<div class="line"><span class="lineno"> 1496</span>  </div>
<div class="line"><span class="lineno"> 1497</span>  <span class="comment">// Lectura de sensor NTC (temperatura radiante) usando ecuación Steinhart-Hart</span></div>
<div class="line"><span class="lineno"> 1498</span>  <span class="keywordtype">int</span> analogValue = analogRead(<a class="code hl_define" href="group__pines__grupo.html#ga00f0342506a37776704c9bf59a4039db">TEMP_PIN</a>);</div>
<div class="line"><span class="lineno"> 1499</span>  <a class="code hl_variable" href="group__variables__grupo.html#gab35f43c7567f70886ccbc1870761fd13">tempR</a> = 1 / (log(1 / (1023. / analogValue - 1)) / <a class="code hl_variable" href="group__pines__grupo.html#gab4f64a073a2588034b92bb788790dec5">BETA</a> + 1.0 / 298.15) - 273.15;  <span class="comment">// °C</span></div>
<div class="line"><span class="lineno"> 1500</span> </div>
<div class="line"><span class="lineno"> 1501</span>  <span class="comment">// Validación de lecturas del sensor DHT11</span></div>
<div class="line"><span class="lineno"> 1502</span>  <span class="keywordflow">if</span> (isnan(<a class="code hl_variable" href="group__variables__grupo.html#ga34280c09711b9f4f72211e5c467b57bf">humedad</a>) || isnan(<a class="code hl_variable" href="group__variables__grupo.html#gac3170cbfa9a8c8b0c3d2ee9d0765c293">tempA</a>)) {</div>
<div class="line"><span class="lineno"> 1503</span>    Serial.println(<span class="stringliteral">&quot;Failed to read from DHT sensor!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1504</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1505</span>  }</div>
<div class="line"><span class="lineno"> 1506</span>}</div>
<div class="ttc" id="agroup__hardware__grupo_html_gad7a1df263f6f823242a112ec11297434"><div class="ttname"><a href="group__hardware__grupo.html#gad7a1df263f6f823242a112ec11297434">dht</a></div><div class="ttdeci">DHT dht(DHTPIN, DHTTYPE)</div><div class="ttdoc">Objeto sensor DHT11 para medición de temperatura y humedad.</div></div>
<div class="ttc" id="agroup__pines__grupo_html_ga00f0342506a37776704c9bf59a4039db"><div class="ttname"><a href="group__pines__grupo.html#ga00f0342506a37776704c9bf59a4039db">TEMP_PIN</a></div><div class="ttdeci">#define TEMP_PIN</div><div class="ttdoc">Pin analógico para termistor NTC - Temperatura radiante.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00121">sistema_confort_termico.ino:121</a></div></div>
<div class="ttc" id="agroup__pines__grupo_html_ga51fd859df7f54aaa2ef64c36c97b548a"><div class="ttname"><a href="group__pines__grupo.html#ga51fd859df7f54aaa2ef64c36c97b548a">LDR_PIN</a></div><div class="ttdeci">#define LDR_PIN</div><div class="ttdoc">Pin analógico para sensor LDR - Medición de luminosidad ambiental.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00120">sistema_confort_termico.ino:120</a></div></div>
<div class="ttc" id="agroup__pines__grupo_html_gab4f64a073a2588034b92bb788790dec5"><div class="ttname"><a href="group__pines__grupo.html#gab4f64a073a2588034b92bb788790dec5">BETA</a></div><div class="ttdeci">const float BETA</div><div class="ttdoc">Coeficiente beta del termistor NTC.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00136">sistema_confort_termico.ino:136</a></div></div>
<div class="ttc" id="agroup__variables__grupo_html_ga34280c09711b9f4f72211e5c467b57bf"><div class="ttname"><a href="group__variables__grupo.html#ga34280c09711b9f4f72211e5c467b57bf">humedad</a></div><div class="ttdeci">float humedad</div><div class="ttdoc">Humedad relativa del ambiente [%] - Sensor DHT11.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00193">sistema_confort_termico.ino:193</a></div></div>
<div class="ttc" id="agroup__variables__grupo_html_gaa22435b55a8b84bf16cf00696cefbad1"><div class="ttname"><a href="group__variables__grupo.html#gaa22435b55a8b84bf16cf00696cefbad1">luz</a></div><div class="ttdeci">float luz</div><div class="ttdoc">Nivel de luminosidad ambiental [%] - Sensor LDR.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00194">sistema_confort_termico.ino:194</a></div></div>
<div class="ttc" id="agroup__variables__grupo_html_gab35f43c7567f70886ccbc1870761fd13"><div class="ttname"><a href="group__variables__grupo.html#gab35f43c7567f70886ccbc1870761fd13">tempR</a></div><div class="ttdeci">float tempR</div><div class="ttdoc">Temperatura radiante media [°C] - Sensor NTC.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00192">sistema_confort_termico.ino:192</a></div></div>
<div class="ttc" id="agroup__variables__grupo_html_gac3170cbfa9a8c8b0c3d2ee9d0765c293"><div class="ttname"><a href="group__variables__grupo.html#gac3170cbfa9a8c8b0c3d2ee9d0765c293">tempA</a></div><div class="ttdeci">float tempA</div><div class="ttdoc">Temperatura del aire ambiente [°C] - Sensor DHT11.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00191">sistema_confort_termico.ino:191</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="sistema__confort__termico_8ino_source.html#l00136">BETA</a>, <a class="el" href="group__hardware__grupo.html#gad7a1df263f6f823242a112ec11297434">dht()</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00193">humedad</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00120">LDR_PIN</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00194">luz</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00121">TEMP_PIN</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00191">tempA</a> y <a class="el" href="sistema__confort__termico_8ino_source.html#l00192">tempR</a>.</p>

<p class="reference">Referenciado por <a class="el" href="sistema__confort__termico_8ino_source.html#l01757">checkPMV()</a> y <a class="el" href="sistema__confort__termico_8ino_source.html#l00783">outputMonitor()</a>.</p>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas de esta función:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_cgraph.png" border="0" usemap="#agroup__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_cgraph" id="agroup__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_cgraph">
<area shape="rect" title="Lee y procesa datos de todos los sensores del sistema." alt="" coords="5,5,103,32"/>
<area shape="rect" href="group__hardware__grupo.html#gad7a1df263f6f823242a112ec11297434" title="Objeto sensor DHT11 para medición de temperatura y humedad." alt="" coords="151,5,190,32"/>
<area shape="poly" title=" " alt="" coords="103,16,135,16,135,21,103,21"/>
</map>
</div>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas a esta función:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_icgraph.png" border="0" usemap="#agroup__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_icgraph" id="agroup__auxiliares__grupo_ga6488153c8ee9b1f1a7ef5db4ff81ca88_icgraph">
<area shape="rect" title="Lee y procesa datos de todos los sensores del sistema." alt="" coords="335,31,432,57"/>
<area shape="rect" href="group__verificacion__grupo.html#gaec3d803c0bdc0d568fd8ebb776f93dd6" title="Verifica cálculo PMV y determina transiciones desde estado MONITOR." alt="" coords="194,5,280,32"/>
<area shape="poly" title=" " alt="" coords="319,36,279,29,280,23,320,30"/>
<area shape="rect" href="group__estados__grupo.html#gac6e2aedfa62714338c55314abed3975a" title="Maneja la entrada al estado MONITOR &#45; monitoreo principal." alt="" coords="187,56,287,83"/>
<area shape="poly" title=" " alt="" coords="320,58,288,63,287,58,319,52"/>
<area shape="rect" href="sistema__confort__termico_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Bucle principal del sistema &#45; Ejecución continua." alt="" coords="49,5,95,32"/>
<area shape="poly" title=" " alt="" coords="179,21,95,21,95,16,179,16"/>
<area shape="rect" href="sistema__confort__termico_8ino.html#a0f66d65ae208fa0a707755d77441dd5f" title="Configura todas las transiciones y callbacks de la FSM." alt="" coords="5,56,139,83"/>
<area shape="poly" title=" " alt="" coords="171,72,139,72,139,67,171,67"/>
</map>
</div>

</div>
</div>
<a id="ga60fb856dfde931eb206fe822fd5aba1c" name="ga60fb856dfde931eb206fe822fd5aba1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60fb856dfde931eb206fe822fd5aba1c">&#9670;&#160;</a></span>readInputSerial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readInputSerial </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee entrada del usuario desde el puerto serial. </p>
<dl class="section return"><dt>Devuelve</dt><dd><a class="el" href="group__fsm__grupo.html#ga080a822f0093973313bd644e517a5090" title="Enumeración de entradas que disparan transiciones de estado.">Input</a> Entrada del usuario mapeada a enumeración <a class="el" href="group__fsm__grupo.html#ga080a822f0093973313bd644e517a5090" title="Enumeración de entradas que disparan transiciones de estado.">Input</a></dd></dl>
<p>Convierte caracteres numéricos del puerto serial a las entradas definidas en la enumeración <a class="el" href="group__fsm__grupo.html#ga080a822f0093973313bd644e517a5090" title="Enumeración de entradas que disparan transiciones de estado.">Input</a> para la FSM. Utilizado principalmente para debugging y control manual durante desarrollo.</p>
<p>@mapping</p><ul>
<li>'0' → SISTEMA_BLOQUEADO</li>
<li>'1' → TECLA_ASTERISCO <br  />
</li>
<li>'2' → CLAVE_CORRECTA</li>
<li>'3' → TIEMPO_EXPIRADO</li>
<li>'4' → PMV_MENOR_QUE_MENOS1</li>
<li>'5' → PMV_MAYOR_QUE_1</li>
<li>'6' → TEMP_ALTA_3_INTENTOS</li>
<li>'7' → SENSOR_INFRARROJO</li>
</ul>
<dl class="section see"><dt>Ver también</dt><dd><a class="el" href="group__fsm__grupo.html#ga080a822f0093973313bd644e517a5090" title="Enumeración de entradas que disparan transiciones de estado.">Input</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="sistema__confort__termico_8ino_source.html#l00991">991</a> del archivo <a class="el" href="sistema__confort__termico_8ino_source.html">sistema_confort_termico.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  991</span>                      {</div>
<div class="line"><span class="lineno">  992</span>  <a class="code hl_enumeration" href="group__fsm__grupo.html#ga080a822f0093973313bd644e517a5090">Input</a> currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a4e81c184ac3ad48a389cd4454c4a05bb">Input::Unknown</a>;</div>
<div class="line"><span class="lineno">  993</span>  <span class="keywordflow">if</span> (Serial.available()) {</div>
<div class="line"><span class="lineno">  994</span>    <span class="keywordtype">char</span> incomingChar = Serial.read();</div>
<div class="line"><span class="lineno">  995</span>    <span class="keywordflow">switch</span> (incomingChar) {</div>
<div class="line"><span class="lineno">  996</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090ab652af68661ddf57916254db968b28eb">Input::SISTEMA_BLOQUEADO</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  997</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090af6ac79524f6fe1d95e4acebe357ea706">Input::TECLA_ASTERISCO</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  998</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a398b625d64c410187ddeac0ed88bc986">Input::CLAVE_CORRECTA</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  999</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a1b2a320ec55c121b96574e682f8ff73c">Input::TIEMPO_EXPIRADO</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1000</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a2b0381e4ee70ef37ce71420bbcac30b6">Input::PMV_MENOR_QUE_MENOS1</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1001</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090ad9d2a3689996042933580a10cfb2ee25">Input::PMV_MAYOR_QUE_1</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1002</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;6&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a223d7803a7d9575e01e4b1cef3b3b9bd">Input::TEMP_ALTA_3_INTENTOS</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1003</span>      <span class="keywordflow">case</span> <span class="charliteral">&#39;7&#39;</span>: currentInput = <a class="code hl_enumvalue" href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090ac644d7581577480f8b109e28d9d26b1a">Input::SENSOR_INFRARROJO</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1004</span>      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1005</span>    }</div>
<div class="line"><span class="lineno"> 1006</span>  }</div>
<div class="line"><span class="lineno"> 1007</span>  <span class="keywordflow">return</span> currentInput;</div>
<div class="line"><span class="lineno"> 1008</span>}</div>
<div class="ttc" id="agroup__fsm__grupo_html_ga080a822f0093973313bd644e517a5090"><div class="ttname"><a href="group__fsm__grupo.html#ga080a822f0093973313bd644e517a5090">Input</a></div><div class="ttdeci">Input</div><div class="ttdoc">Enumeración de entradas que disparan transiciones de estado.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00323">sistema_confort_termico.ino:323</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090a1b2a320ec55c121b96574e682f8ff73c"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a1b2a320ec55c121b96574e682f8ff73c">TIEMPO_EXPIRADO</a></div><div class="ttdeci">@ TIEMPO_EXPIRADO</div><div class="ttdoc">Temporizador expirado - Transiciones automáticas.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00327">sistema_confort_termico.ino:327</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090a223d7803a7d9575e01e4b1cef3b3b9bd"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a223d7803a7d9575e01e4b1cef3b3b9bd">TEMP_ALTA_3_INTENTOS</a></div><div class="ttdeci">@ TEMP_ALTA_3_INTENTOS</div><div class="ttdoc">Temperatura crítica persistente - Activa alarma.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00330">sistema_confort_termico.ino:330</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090a2b0381e4ee70ef37ce71420bbcac30b6"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a2b0381e4ee70ef37ce71420bbcac30b6">PMV_MENOR_QUE_MENOS1</a></div><div class="ttdeci">@ PMV_MENOR_QUE_MENOS1</div><div class="ttdoc">Condición PMV &lt; -1 detectada - Requiere calefacción.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00328">sistema_confort_termico.ino:328</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090a398b625d64c410187ddeac0ed88bc986"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a398b625d64c410187ddeac0ed88bc986">CLAVE_CORRECTA</a></div><div class="ttdeci">@ CLAVE_CORRECTA</div><div class="ttdoc">Clave válida ingresada - Autenticación exitosa.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00326">sistema_confort_termico.ino:326</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090a4e81c184ac3ad48a389cd4454c4a05bb"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090a4e81c184ac3ad48a389cd4454c4a05bb">Unknown</a></div><div class="ttdeci">@ Unknown</div><div class="ttdoc">Entrada desconocida o no definida.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00332">sistema_confort_termico.ino:332</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090ab652af68661ddf57916254db968b28eb"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090ab652af68661ddf57916254db968b28eb">SISTEMA_BLOQUEADO</a></div><div class="ttdeci">@ SISTEMA_BLOQUEADO</div><div class="ttdoc">Activación por condición de bloqueo de seguridad.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00324">sistema_confort_termico.ino:324</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090ac644d7581577480f8b109e28d9d26b1a"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090ac644d7581577480f8b109e28d9d26b1a">SENSOR_INFRARROJO</a></div><div class="ttdeci">@ SENSOR_INFRARROJO</div><div class="ttdoc">Detección de movimiento - Desactiva alarma.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00331">sistema_confort_termico.ino:331</a></div></div>
<div class="ttc" id="agroup__fsm__grupo_html_gga080a822f0093973313bd644e517a5090ad9d2a3689996042933580a10cfb2ee25"><div class="ttname"><a href="group__fsm__grupo.html#gga080a822f0093973313bd644e517a5090ad9d2a3689996042933580a10cfb2ee25">PMV_MAYOR_QUE_1</a></div><div class="ttdeci">@ PMV_MAYOR_QUE_1</div><div class="ttdoc">Condición PMV &gt; 1 detectada - Requiere ventilación.</div><div class="ttdef"><b>Definition</b> <a href="sistema__confort__termico_8ino_source.html#l00329">sistema_confort_termico.ino:329</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="sistema__confort__termico_8ino_source.html#l00326">CLAVE_CORRECTA</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00329">PMV_MAYOR_QUE_1</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00328">PMV_MENOR_QUE_MENOS1</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00331">SENSOR_INFRARROJO</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00324">SISTEMA_BLOQUEADO</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00325">TECLA_ASTERISCO</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00330">TEMP_ALTA_3_INTENTOS</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00327">TIEMPO_EXPIRADO</a> y <a class="el" href="sistema__confort__termico_8ino_source.html#l00332">Unknown</a>.</p>

<p class="reference">Referenciado por <a class="el" href="sistema__confort__termico_8ino_source.html#l00590">loop()</a>.</p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas a esta función:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_ga60fb856dfde931eb206fe822fd5aba1c_icgraph.png" border="0" usemap="#agroup__auxiliares__grupo_ga60fb856dfde931eb206fe822fd5aba1c_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_ga60fb856dfde931eb206fe822fd5aba1c_icgraph" id="agroup__auxiliares__grupo_ga60fb856dfde931eb206fe822fd5aba1c_icgraph">
<area shape="rect" title="Lee entrada del usuario desde el puerto serial." alt="" coords="99,5,206,32"/>
<area shape="rect" href="sistema__confort__termico_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Bucle principal del sistema &#45; Ejecución continua." alt="" coords="5,5,51,32"/>
<area shape="poly" title=" " alt="" coords="83,21,51,21,51,16,83,16"/>
</map>
</div>

</div>
</div>
<a id="ga451fb754ff1057f95e36210846ea0aca" name="ga451fb754ff1057f95e36210846ea0aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga451fb754ff1057f95e36210846ea0aca">&#9670;&#160;</a></span>readPassword()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readPassword </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee la contraseña del keypad con feedback visual en LCD. </p>
<p>Captura secuencialmente 6 caracteres del keypad mostrando:</p><ul>
<li>Guión bajo (_) en posición actual antes de ingresar carácter</li>
<li>Asterisco (*) después de ingresar carácter (ocultación por seguridad)</li>
<li>Pequeño delay entre teclas para mejor experiencia de usuario</li>
<li>Timeout automático por seguridad</li>
</ul>
<dl class="section post"><dt>Postcondición</dt><dd>clave_user contiene los 6 caracteres ingresados por el usuario @security Los caracteres se muestran como '*' para evitar visualización</dd></dl>
<dl class="section see"><dt>Ver también</dt><dd><a class="el" href="#gaf8626fd53a9fd252db6f253207b78b87" title="Valida la contraseña ingresada contra la clave predefinida.">checkPassword()</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="sistema__confort__termico_8ino_source.html#l01390">1390</a> del archivo <a class="el" href="sistema__confort__termico_8ino_source.html">sistema_confort_termico.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1390</span>                    {</div>
<div class="line"><span class="lineno"> 1391</span>  <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.clear();</div>
<div class="line"><span class="lineno"> 1392</span>  <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.setCursor(0, 0);</div>
<div class="line"><span class="lineno"> 1393</span>  <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.print(<span class="stringliteral">&quot;Ingrese clave:&quot;</span>);</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; i++) {</div>
<div class="line"><span class="lineno"> 1396</span>    <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.setCursor(i, 1);  <span class="comment">// Mostrar posición actual</span></div>
<div class="line"><span class="lineno"> 1397</span>    <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.print(<span class="stringliteral">&quot;_&quot;</span>);</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>    <span class="keywordtype">char</span> key = NO_KEY;</div>
<div class="line"><span class="lineno"> 1400</span>    <span class="keywordflow">while</span> (key == NO_KEY) {</div>
<div class="line"><span class="lineno"> 1401</span>      key = <a class="code hl_variable" href="sistema__confort__termico_8ino.html#a0e6c3cc7e8c762ab0ca1fa2296d7bbfe">keypad</a>.getKey();</div>
<div class="line"><span class="lineno"> 1402</span>    }</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>    <a class="code hl_variable" href="sistema__confort__termico_8ino.html#a87806aa7f4565584aaf628f4dc5b18fd">clave_user</a>[i] = key;</div>
<div class="line"><span class="lineno"> 1405</span>    <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.setCursor(i, 1);</div>
<div class="line"><span class="lineno"> 1406</span>    <a class="code hl_function" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd</a>.print(<span class="stringliteral">&quot;*&quot;</span>);  <span class="comment">// Mostrar asterisco en lugar del carácter real</span></div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>    <a class="code hl_function" href="group__tareas__grupo.html#gabe10de4c559b3dc44bc3e0858d41553e">TaskTime</a>.SetIntervalMillis(300);  <span class="comment">// Pequeña pausa entre teclas</span></div>
<div class="line"><span class="lineno"> 1409</span>    <a class="code hl_function" href="group__tareas__grupo.html#gabe10de4c559b3dc44bc3e0858d41553e">TaskTime</a>.Start();</div>
<div class="line"><span class="lineno"> 1410</span>  }</div>
<div class="line"><span class="lineno"> 1411</span>}</div>
<div class="ttc" id="agroup__tareas__grupo_html_gabe10de4c559b3dc44bc3e0858d41553e"><div class="ttname"><a href="group__tareas__grupo.html#gabe10de4c559b3dc44bc3e0858d41553e">TaskTime</a></div><div class="ttdeci">AsyncTask TaskTime(5000, true, runTime)</div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="sistema__confort__termico_8ino_source.html#l00251">clave_user</a>, <a class="el" href="sistema__confort__termico_8ino_source.html#l00271">keypad</a>, <a class="el" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2">lcd()</a> y <a class="el" href="group__tareas__grupo.html#gabe10de4c559b3dc44bc3e0858d41553e">TaskTime()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="sistema__confort__termico_8ino_source.html#l00646">outputInicio()</a>.</p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas de esta función:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_cgraph.png" border="0" usemap="#agroup__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_cgraph" id="agroup__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_cgraph">
<area shape="rect" title="Lee la contraseña del keypad con feedback visual en LCD." alt="" coords="5,31,109,57"/>
<area shape="rect" href="group__hardware__grupo.html#gaf97afdf00af0e116e9b5957f6a470fc2" title="Objeto LCD para display 16x2 con configuración de pines." alt="" coords="176,5,215,32"/>
<area shape="poly" title=" " alt="" coords="109,32,161,22,162,27,110,37"/>
<area shape="rect" href="group__tareas__grupo.html#gabe10de4c559b3dc44bc3e0858d41553e" title=" " alt="" coords="157,56,234,83"/>
<area shape="poly" title=" " alt="" coords="110,51,142,57,141,62,109,56"/>
<area shape="rect" href="group__tareas__grupo.html#ga253c50d22391b4a847c214fe6aa3bd29" title="Tarea de temporizador principal del sistema." alt="" coords="282,56,349,83"/>
<area shape="poly" title=" " alt="" coords="235,67,267,67,267,72,235,72"/>
</map>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Gráfico de llamadas a esta función:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_icgraph.png" border="0" usemap="#agroup__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_icgraph" id="agroup__auxiliares__grupo_ga451fb754ff1057f95e36210846ea0aca_icgraph">
<area shape="rect" title="Lee la contraseña del keypad con feedback visual en LCD." alt="" coords="322,5,425,32"/>
<area shape="rect" href="group__estados__grupo.html#ga390833d0072e6440c9707a25c053dfb3" title="Maneja la entrada al estado INICIO &#45; autenticación de usuario." alt="" coords="187,5,274,32"/>
<area shape="poly" title=" " alt="" coords="306,21,274,21,274,16,306,16"/>
<area shape="rect" href="sistema__confort__termico_8ino.html#a0f66d65ae208fa0a707755d77441dd5f" title="Configura todas las transiciones y callbacks de la FSM." alt="" coords="5,5,139,32"/>
<area shape="poly" title=" " alt="" coords="171,21,139,21,139,16,171,16"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generado el <span class="timestamp"></span> para Sistema de Confort Térmico Inteligente v3.1 por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
